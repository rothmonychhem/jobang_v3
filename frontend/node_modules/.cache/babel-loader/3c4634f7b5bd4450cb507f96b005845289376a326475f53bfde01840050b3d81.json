{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lina\\\\JobBangFINFOREAL\\\\jobbanglinainesFIN-master\\\\frontend\\\\src\\\\components\\\\MesAnnonces\\\\EmploiDetails.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useEmploiContext } from \"../../hooks/useEmploiContext\";\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow';\nimport \"./EmploiDetails.css\"; // Add your CSS file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EmploiDetail = ({\n  emploi\n}) => {\n  _s();\n  const {\n    dispatch\n  } = useEmploiContext();\n  const [showDetails, setShowDetails] = useState(false); // State to show/hide details\n  const [showEmail, setShowEmail] = useState(false); // State to show/hide email popup\n  const [loading, setLoading] = useState(false); // Loading state\n  const [error, setError] = useState(null); // Error state\n\n  // Function to handle delete\n  const handleClick = async () => {\n    setLoading(true); // Set loading state\n    setError(null); // Reset error state\n\n    const response = await fetch('/api/offreEmploi/' + emploi._id, {\n      method: 'DELETE'\n    });\n    const json = await response.json();\n    setLoading(false); // Reset loading state\n\n    if (response.ok) {\n      console.log('Suppression réussie:', json);\n      dispatch({\n        type: 'DELETE_EMPLOIS',\n        payload: json\n      });\n    } else {\n      setError('Échec de la suppression: ' + json.message); // Set error message\n    }\n  };\n\n  // Function to toggle job details\n  const toggleDetails = () => {\n    setShowDetails(prevState => !prevState);\n  };\n\n  // Function to toggle email visibility\n  const toggleEmail = () => {\n    setShowEmail(prevState => !prevState);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"emploi-detail-container\",\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"lmj-emploi-list\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"emploi-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"jobTitle\",\n          onClick: toggleDetails,\n          style: {\n            cursor: \"pointer\"\n          },\n          children: emploi.nom_poste\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"jobEntreprise\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Entreprise:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this), \" \", emploi.nom_entreprise]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"jobLocation\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Emplacement:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 13\n          }, this), \" \", emploi.emplacement]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"buttonP\",\n          onClick: toggleEmail,\n          children: \"Afficher l'email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), showEmail && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"popup-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"close\",\n              onClick: toggleEmail,\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Email: \", /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `mailto:${emploi.email_employeur}`,\n                children: emploi.email_employeur\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 28\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), showDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"details-popup\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"details-popup-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"close\",\n              onClick: toggleDetails,\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"details-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Description:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: emploi.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Responsabilit\\xE9s:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: emploi.responsabilites\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Exigences:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: emploi.exigences\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClick,\n          className: \"delete-button\",\n          disabled: loading,\n          children: loading ? 'Suppression...' : 'Supprimer l\\'annonce'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(EmploiDetail, \"poF+BvF2PU+yvZa7xpgs1Ug/UzU=\", false, function () {\n  return [useEmploiContext];\n});\n_c = EmploiDetail;\nexport default EmploiDetail;\nvar _c;\n$RefreshReg$(_c, \"EmploiDetail\");","map":{"version":3,"names":["useState","useEmploiContext","formatDistanceToNow","jsxDEV","_jsxDEV","EmploiDetail","emploi","_s","dispatch","showDetails","setShowDetails","showEmail","setShowEmail","loading","setLoading","error","setError","handleClick","response","fetch","_id","method","json","ok","console","log","type","payload","message","toggleDetails","prevState","toggleEmail","className","children","onClick","style","cursor","nom_poste","fileName","_jsxFileName","lineNumber","columnNumber","nom_entreprise","emplacement","href","email_employeur","description","responsabilites","exigences","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Lina/JobBangFINFOREAL/jobbanglinainesFIN-master/frontend/src/components/MesAnnonces/EmploiDetails.js"],"sourcesContent":["import { useState } from 'react';\nimport { useEmploiContext } from \"../../hooks/useEmploiContext\";\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow';\nimport \"./EmploiDetails.css\"; // Add your CSS file\n\nconst EmploiDetail = ({ emploi }) => {\n  const { dispatch } = useEmploiContext();\n  const [showDetails, setShowDetails] = useState(false); // State to show/hide details\n  const [showEmail, setShowEmail] = useState(false); // State to show/hide email popup\n  const [loading, setLoading] = useState(false); // Loading state\n  const [error, setError] = useState(null); // Error state\n\n  // Function to handle delete\n  const handleClick = async () => {\n    setLoading(true); // Set loading state\n    setError(null); // Reset error state\n\n    const response = await fetch('/api/offreEmploi/' + emploi._id, {\n      method: 'DELETE',\n    });\n\n    const json = await response.json();\n    setLoading(false); // Reset loading state\n\n    if (response.ok) {\n      console.log('Suppression réussie:', json);\n      dispatch({ type: 'DELETE_EMPLOIS', payload: json });\n    } else {\n      setError('Échec de la suppression: ' + json.message); // Set error message\n    }\n  };\n\n  // Function to toggle job details\n  const toggleDetails = () => {\n    setShowDetails(prevState => !prevState);\n  };\n\n  // Function to toggle email visibility\n  const toggleEmail = () => {\n    setShowEmail(prevState => !prevState);\n  };\n\n  return (\n    <div className=\"emploi-detail-container\">\n      <ul className=\"lmj-emploi-list\">\n        <div className=\"emploi-container\">\n          <h3 className=\"jobTitle\" onClick={toggleDetails} style={{ cursor: \"pointer\" }}>\n            {emploi.nom_poste}\n          </h3>\n          <span className=\"jobEntreprise\">\n            <span className=\"label\">Entreprise:</span> {emploi.nom_entreprise}\n          </span>\n          <span className=\"jobLocation\">\n            <span className=\"label\">Emplacement:</span> {emploi.emplacement}\n          </span>\n          <button className=\"buttonP\" onClick={toggleEmail}>\n            Afficher l'email\n          </button>\n\n          {/* Email popup */}\n          {showEmail && (\n            <div className=\"popup\">\n              <div className=\"popup-content\">\n                <span className=\"close\" onClick={toggleEmail}>&times;</span>\n                <h4>Email: <a href={`mailto:${emploi.email_employeur}`}>{emploi.email_employeur}</a></h4>\n              </div>\n            </div>\n          )}\n\n          {/* Details popup */}\n          {showDetails && (\n            <div className=\"details-popup\">\n              <div className=\"details-popup-content\">\n                <span className=\"close\" onClick={toggleDetails}>&times;</span>\n                <div className=\"details-content\">\n                  <h4>Description:</h4>\n                  <p>{emploi.description}</p>\n                  <h4>Responsabilités:</h4>\n                  <p>{emploi.responsabilites}</p>\n                  <h4>Exigences:</h4>\n                  <p>{emploi.exigences}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Error message */}\n          {error && <div className=\"error-message\">{error}</div>}\n\n          <button onClick={handleClick} className=\"delete-button\" disabled={loading}>\n            {loading ? 'Suppression...' : 'Supprimer l\\'annonce'}\n          </button>\n        </div>\n      </ul>\n    </div>\n  );\n};\n\nexport default EmploiDetail;\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,gBAAgB,QAAQ,8BAA8B;AAC/D,OAAOC,mBAAmB,MAAM,8BAA8B;AAC9D,OAAO,qBAAqB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE9B,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAO,CAAC,KAAK;EAAAC,EAAA;EACnC,MAAM;IAAEC;EAAS,CAAC,GAAGP,gBAAgB,CAAC,CAAC;EACvC,MAAM,CAACQ,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACvD,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACnD,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAE1C;EACA,MAAMiB,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9BH,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;IAEhB,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAC,mBAAmB,GAAGb,MAAM,CAACc,GAAG,EAAE;MAC7DC,MAAM,EAAE;IACV,CAAC,CAAC;IAEF,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACI,IAAI,CAAC,CAAC;IAClCR,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;;IAEnB,IAAII,QAAQ,CAACK,EAAE,EAAE;MACfC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEH,IAAI,CAAC;MACzCd,QAAQ,CAAC;QAAEkB,IAAI,EAAE,gBAAgB;QAAEC,OAAO,EAAEL;MAAK,CAAC,CAAC;IACrD,CAAC,MAAM;MACLN,QAAQ,CAAC,2BAA2B,GAAGM,IAAI,CAACM,OAAO,CAAC,CAAC,CAAC;IACxD;EACF,CAAC;;EAED;EACA,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1BnB,cAAc,CAACoB,SAAS,IAAI,CAACA,SAAS,CAAC;EACzC,CAAC;;EAED;EACA,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxBnB,YAAY,CAACkB,SAAS,IAAI,CAACA,SAAS,CAAC;EACvC,CAAC;EAED,oBACE1B,OAAA;IAAK4B,SAAS,EAAC,yBAAyB;IAAAC,QAAA,eACtC7B,OAAA;MAAI4B,SAAS,EAAC,iBAAiB;MAAAC,QAAA,eAC7B7B,OAAA;QAAK4B,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC/B7B,OAAA;UAAI4B,SAAS,EAAC,UAAU;UAACE,OAAO,EAAEL,aAAc;UAACM,KAAK,EAAE;YAAEC,MAAM,EAAE;UAAU,CAAE;UAAAH,QAAA,EAC3E3B,MAAM,CAAC+B;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACf,CAAC,eACLrC,OAAA;UAAM4B,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC7B7B,OAAA;YAAM4B,SAAS,EAAC,OAAO;YAAAC,QAAA,EAAC;UAAW;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,KAAC,EAACnC,MAAM,CAACoC,cAAc;QAAA;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7D,CAAC,eACPrC,OAAA;UAAM4B,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC3B7B,OAAA;YAAM4B,SAAS,EAAC,OAAO;YAAAC,QAAA,EAAC;UAAY;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,KAAC,EAACnC,MAAM,CAACqC,WAAW;QAAA;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3D,CAAC,eACPrC,OAAA;UAAQ4B,SAAS,EAAC,SAAS;UAACE,OAAO,EAAEH,WAAY;UAAAE,QAAA,EAAC;QAElD;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAGR9B,SAAS,iBACRP,OAAA;UAAK4B,SAAS,EAAC,OAAO;UAAAC,QAAA,eACpB7B,OAAA;YAAK4B,SAAS,EAAC,eAAe;YAAAC,QAAA,gBAC5B7B,OAAA;cAAM4B,SAAS,EAAC,OAAO;cAACE,OAAO,EAAEH,WAAY;cAAAE,QAAA,EAAC;YAAO;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC5DrC,OAAA;cAAA6B,QAAA,GAAI,SAAO,eAAA7B,OAAA;gBAAGwC,IAAI,EAAE,UAAUtC,MAAM,CAACuC,eAAe,EAAG;gBAAAZ,QAAA,EAAE3B,MAAM,CAACuC;cAAe;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EAGAhC,WAAW,iBACVL,OAAA;UAAK4B,SAAS,EAAC,eAAe;UAAAC,QAAA,eAC5B7B,OAAA;YAAK4B,SAAS,EAAC,uBAAuB;YAAAC,QAAA,gBACpC7B,OAAA;cAAM4B,SAAS,EAAC,OAAO;cAACE,OAAO,EAAEL,aAAc;cAAAI,QAAA,EAAC;YAAO;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC9DrC,OAAA;cAAK4B,SAAS,EAAC,iBAAiB;cAAAC,QAAA,gBAC9B7B,OAAA;gBAAA6B,QAAA,EAAI;cAAY;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACrBrC,OAAA;gBAAA6B,QAAA,EAAI3B,MAAM,CAACwC;cAAW;gBAAAR,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC3BrC,OAAA;gBAAA6B,QAAA,EAAI;cAAgB;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACzBrC,OAAA;gBAAA6B,QAAA,EAAI3B,MAAM,CAACyC;cAAe;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC/BrC,OAAA;gBAAA6B,QAAA,EAAI;cAAU;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACnBrC,OAAA;gBAAA6B,QAAA,EAAI3B,MAAM,CAAC0C;cAAS;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EAGA1B,KAAK,iBAAIX,OAAA;UAAK4B,SAAS,EAAC,eAAe;UAAAC,QAAA,EAAElB;QAAK;UAAAuB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAEtDrC,OAAA;UAAQ8B,OAAO,EAAEjB,WAAY;UAACe,SAAS,EAAC,eAAe;UAACiB,QAAQ,EAAEpC,OAAQ;UAAAoB,QAAA,EACvEpB,OAAO,GAAG,gBAAgB,GAAG;QAAsB;UAAAyB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEV,CAAC;AAAClC,EAAA,CA3FIF,YAAY;EAAA,QACKJ,gBAAgB;AAAA;AAAAiD,EAAA,GADjC7C,YAAY;AA6FlB,eAAeA,YAAY;AAAC,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}